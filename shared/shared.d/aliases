#!/bin/sh
# Cross-platform aliases (works in bash and zsh)

# Modern CLI replacements
command -v eza &>/dev/null && alias ls='eza'
command -v bat &>/dev/null && alias cat='bat --paging=never'
command -v zoxide &>/dev/null && eval "$(zoxide init ${SHELL_TYPE:-bash})"

# Common aliases
alias ll='ls -la'
alias la='ls -a'
alias l='ls -l'
alias ..='cd ..'
alias ...='cd ../..'
alias grep='grep --color=auto'
alias mkdir='mkdir -pv'
alias df='df -h'
alias du='du -h'

# Git shortcuts
alias g='git'
alias gs='git status'
alias ga='git add'
alias gc='git commit'
alias gp='git push'
alias gl='git pull'
alias gd='git diff'
alias gco='git checkout'
alias gb='git branch'
alias glog='git log --oneline --graph --decorate'

# Config version
version() {
    local ver_file="$HOME/.epicli-conf-version"
    local manifest_file="$HOME/.epicli-conf-manifest"
    if [ -f "$ver_file" ]; then
        local ver mode tool_count
        ver="$(head -1 "$ver_file")"
        if [ -f "$manifest_file" ]; then
            mode=$(grep '^mode=' "$manifest_file" | cut -d= -f2)
            tool_count=$(sed -n '/^\[tools\]/,/^\[/{/^\[/d;/^#/d;/^$/d;p}' "$manifest_file" | wc -l)
            printf "epicli-conf v%s (%s) %s | %s tools\n" "$ver" "$(sed -n '2p' "$ver_file")" "${mode:-standard}" "$tool_count"
            printf "  Run 'epicli-conf version' for details\n"
        else
            printf "epicli-conf v%s (%s)\n" "$ver" "$(sed -n '2p' "$ver_file")"
        fi
    else
        echo "epicli-conf: not installed"
    fi
}

# Safety nets
alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'
